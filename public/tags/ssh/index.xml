<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Ssh on Alecks ðŸŒ±</title>
    <link>http://localhost:1313/tags/ssh/</link>
    <description>Recent content in Ssh on Alecks ðŸŒ±</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <copyright>No copyright âœ§.*</copyright>
    <lastBuildDate>Thu, 25 Apr 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/ssh/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Securing ssh on your linux server.</title>
      <link>http://localhost:1313/blog/securing-server/</link>
      <pubDate>Thu, 25 Apr 2024 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/blog/securing-server/</guid>
      <description>&lt;p&gt;This post is made for debian based linux distros&lt;/p&gt;&#xA;&lt;h2 id=&#34;non-root-account-for-logins--disable-root-login&#34;&gt;Non-root account for logins / Disable root login.&lt;/h2&gt;&#xA;&lt;p&gt;Disabling the ability to login as root helps with many automated bots that brute-force ssh into your server, start by making a new user with any username you wants&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;adduser kuma&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then add it to the list of sudoers&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;usermod -aG sudo kuma&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;using-ssh-keys-over-plaintext-passwords&#34;&gt;Using SSH keys over plaintext passwords.&lt;/h2&gt;&#xA;&lt;p&gt;SSH Keys are both more convenient and more secure than a regular plaintext password, especially the default one set by your hosting provider.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>This post is made for debian based linux distros</p>
<h2 id="non-root-account-for-logins--disable-root-login">Non-root account for logins / Disable root login.</h2>
<p>Disabling the ability to login as root helps with many automated bots that brute-force ssh into your server, start by making a new user with any username you wants</p>





<pre tabindex="0"><code>adduser kuma</code></pre><p>Then add it to the list of sudoers</p>





<pre tabindex="0"><code>usermod -aG sudo kuma</code></pre><h2 id="using-ssh-keys-over-plaintext-passwords">Using SSH keys over plaintext passwords.</h2>
<p>SSH Keys are both more convenient and more secure than a regular plaintext password, especially the default one set by your hosting provider.</p>
<p>Generate an ssh key using PuttyGen and paste it on a new line in <code>/home/&lt;your_username&gt;/.ssh/authorized_keys</code></p>
<h2 id="updating-your-ssh-configuration">Updating your SSH configuration.</h2>
<p>This process can differ depending on your host, but for most servers the ssh config is located in <code>/etc/ssh/sshd_config</code>, in the file you want to change the following values</p>





<pre tabindex="0"><code>PasswordAuthentication no</code></pre>




<pre tabindex="0"><code>PubkeyAuthentication yes</code></pre>




<pre tabindex="0"><code>PermitRootLogin no</code></pre><p>Changing these config vaulues will</p>
<ul>
<li>Disable password authentication</li>
<li>Allow you to login using ssh keys (Which I showed how to setup above)</li>
<li>Disable root login (Applying the steps from before)</li>
</ul>
<p>Run the command below to apply the motifications</p>





<pre tabindex="0"><code>sudo systemctl restart ssh</code></pre><h2 id="ntfy-notifcations-on-ssh-login">NTFY notifcations on ssh login.</h2>
<p>Adding these lines to your <code>/etc/profile</code> file will send a request to your chosen ntfy server when any user logs in via ssh</p>





<pre tabindex="0"><code>if [ -n &#34;$SSH_CLIENT&#34; ]; then

NTFY=&#34;${USER}@$(hostname -f) from $(echo $SSH_CLIENT|awk &#39;{print $1}&#39;)&#34;

curl -u :&lt;ntfy_api_key&gt; -s -H &#34;Title: SSH Login&#34; -d &#34;$NTFY&#34; -L  &#34;https://ntfy.exaple.com/ssh&#34; &gt; /dev/null

fi</code></pre><p>Modify to add your own api key and change the url to your ntfy server</p>
<p>You can also find an example on the ntfy docs <a href="https://docs.ntfy.sh/examples/#ssh-login-alerts">here</a> (Didn&rsquo;t work for me)</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
